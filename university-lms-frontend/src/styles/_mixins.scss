// Shared Sass mixins and design utilities for the LMS UI.
// - Centralizes media queries, truncation, flex helpers, focus rings, cards, and scrollbars.
// - Uses design tokens from _variables.scss. Keep variable names stable for compatibility.

@use 'sass:map';
@use './variables' as *;

// -----------------------------------------------------------------------------
// Breakpoints
// -----------------------------------------------------------------------------
$breakpoints: (
  sm: 640px,
  md: 768px,
  lg: 1024px,
  xl: 1280px,
  2xl: 1536px
);

// Media query helper (mobile-first).
// Usage:
// .example {
//   @include respond-up(md) {
//     font-size: 1.125rem;
//   }
// }
@mixin respond-up($breakpoint) {
  $value: map.get($breakpoints, $breakpoint);

  @if $value == null {
    @error "Unknown breakpoint `#{$breakpoint}`. Available: #{map.keys($breakpoints)}";
  }

  @media (min-width: $value) {
    @content;
  }
}

// -----------------------------------------------------------------------------
// Text utilities
// -----------------------------------------------------------------------------
// Truncate to 1 line (ellipsis) or N lines (line clamp).
@mixin truncate($lines: 1) {
  @if $lines == 1 {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  } @else {
    display: -webkit-box;
    -webkit-line-clamp: $lines;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

// -----------------------------------------------------------------------------
// Flex alignment helpers
// -----------------------------------------------------------------------------
@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

@mixin flex-between {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

// -----------------------------------------------------------------------------
// Focus ring
// -----------------------------------------------------------------------------
// Accessible focus outline with configurable color/offset/width.
// Use on focus-visible to reduce visual noise.
@mixin focus-ring($color: $color-primary, $offset: 1px, $width: 2px) {
  outline: none;
  box-shadow:
    0 0 0 $offset rgba(0, 0, 0, 0),
    0 0 0 $width rgba($color, 0.6);
}

// -----------------------------------------------------------------------------
// Card / surface
// -----------------------------------------------------------------------------
// Consistent elevated surface styling; accepts custom padding.
@mixin card($padding: $space-4) {
  background-color: $color-surface;
  border-radius: $radius-xl;
  box-shadow: $shadow-sm;
  border: 1px solid $color-border;
  padding: $padding;
}

// -----------------------------------------------------------------------------
// Scrollbar (WebKit)
// -----------------------------------------------------------------------------
// Lightweight custom scrollbar; adjust colors/size as needed.
@mixin custom-scrollbar(
  $thumb-color: #6b7280,
  $track-color: transparent,
  $size: 6px
) {
  &::-webkit-scrollbar {
    width: $size;
    height: $size;
  }

  &::-webkit-scrollbar-track {
    background-color: $track-color;
  }

  &::-webkit-scrollbar-thumb {
    background-color: $thumb-color;
    border-radius: $radius-full;
  }
}